# üéØ Respuestas T√©cnicas para Preguntas Sobre AWS - Presentaci√≥n CCS

**Documento de Referencia R√°pida** para responder preguntas t√©cnicas sobre los servicios AWS implementados.

---

## üåê **NETWORKING & SECURITY**

### **VPC (Virtual Private Cloud)**
**¬øPor qu√© una VPC multi-AZ con 3 subnets p√∫blicas, privadas y database?**

‚úÖ **Respuesta**:  
"Implementamos VPC con arquitectura de 3 capas en 3 Availability Zones para alta disponibilidad. Las subnets p√∫blicas alojan ALB y NAT Gateways, las privadas contienen ECS/Lambda sin acceso directo a internet, y las database alojan RDS/ElastiCache con doble aislamiento. Esto sigue el principio de **defense in depth** - cada falla de firewall afecta solo una capa."

**N√∫meros clave**: 
- 3 AZs (us-east-1a/b/c)
- CIDR 10.0.0.0/16 con subnets /24
- NAT Gateways redundantes ($32/each/mes)

---

### **Security Groups**
**¬øC√≥mo garantizas que solo el tr√°fico leg√≠timo accede a los recursos?**

‚úÖ **Respuesta**:  
"Configuramos 6 Security Groups con reglas de **least privilege**. Por ejemplo: Database SG solo acepta PostgreSQL (5432) desde ECS y Lambda, ALB solo 80/443 desde internet, ECS solo recibe desde ALB. No hay reglas 0.0.0.0/0 en inbound, eliminando vectores de ataque desde internet."

**Configuraci√≥n**:
- ALB SG: Ingress 80/443 desde 0.0.0.0/0 (solo HTTPs p√∫blico)
- ECS SG: Solo desde ALB SG
- Database SG: Solo 5432 desde ECS/Lambda
- Cache SG: Solo 6379 desde ECS/Lambda

---

### **VPC Endpoints**
**¬øPor qu√© VPC Endpoints si ya tienes NAT Gateways?**

‚úÖ **Respuesta**:  
"Los VPC Endpoints evitan recorrer NAT Gateways para servicios AWS (S3, DynamoDB, CloudWatch). Beneficios: **$29/mes** vs NAT data transfer, **menor latencia** (ruta directa a AWS), **seguridad mejorada** (tr√°fico no sale de backbone AWS). Para CloudWatch Logs y ECR cr√≠ticos, endpoints son casi obligatorios."

**Endpoints configurados**:
- S3 Gateway (gratis)
- DynamoDB Gateway (gratis)
- ECR API/API DKR Interface (ECR para Docker)
- CloudWatch Logs Interface
- Secrets Manager Interface

---

## üì° **IoT CORE**

### **AWS IoT Core**
**¬øPor qu√© elegir IoT Core vs API Gateway REST para dispositivos?**

‚úÖ **Respuesta**:  
"IoT Core es **especializado** para IoT con MQTT over TLS, 500K conexiones concurrentes, y integraci√≥n nativa con Rules Engine. A diferencia de REST API, soporta QoS 1 (guaranteed delivery), Device Shadow (estado sincronizado), y certificados X.509 por dispositivo. Costo: **$1.00/millon de mensajes** vs $3.50/mill√≥n en API Gateway."

**Caracter√≠sticas**:
- MQTT pub/sub para telemetr√≠a
- Thing Registry para device management
- Device Shadow para sincronizaci√≥n estado
- Rules Engine para routing inteligente (SQL-like)

---

### **IoT Rules Engine**
**¬øC√≥mo funciona el enrutamiento de eventos a diferentes lanes?**

‚úÖ **Respuesta**:  
"Reglas SQL eval√∫an mensajes entrantes y enrutan seg√∫n prioridad. Por ejemplo: `SELECT * FROM 'vehicle/+/emergency' WHERE type IN ('panic_button', 'accident')` ‚Üí SQS FIFO para <2s processing. Rules separadas para telemetr√≠a ‚Üí Kinesis, video metadata ‚Üí DynamoDB. Esto **desacopla** dispositivos del procesamiento downstream."

**Ejemplo de rule**:
```sql
SELECT *, topic(2) as vehicleId, timestamp() as eventTimestamp 
FROM 'vehicle/+/telemetry' 
WHERE cargo_temperature > 30
```

---

## üîÑ **STREAMING**

### **Amazon Kinesis Data Streams**
**¬øPor qu√© Kinesis para procesar 5,000 msg/s?**

‚úÖ **Respuesta**:  
"Kinesis es un log stream **persistente** (retention 24h) que permite procesamiento en tiempo real y recuperaci√≥n de mensajes. Con 10 shards (auto-scale a 50), soportamos 10,000 msg/s. Shards se distribuyen por `vehicleId` (partition key) para garantizar orden por veh√≠culo. Costo: **$0.015/shard-hora**."

**Ventajas sobre SQS**:
- Retenci√≥n 24h vs 14 d√≠as configurables
- M√∫ltiples consumidores (fan-out)
- Replay hist√≥rico
- Shard-level m√©tricas

---

### **SQS FIFO**
**¬øPor qu√© SQS FIFO para emergencias en vez de Kinesis?**

‚úÖ **Respuesta**:  
"SQS FIFO garantiza **exactly-once processing** y orden de mensajes, cr√≠tico para emergencias. Con deduplication basado en MessageGroupId y FIFO throughput mode, procesamos 3,000 msg/seg con retraso <100ms. Kinesis introducir√≠a ~1s de delay por batching. Costo: **$0.50/millon mensajes** + requests."

**Diferencias clave**:
- SQS FIFO: Guaranteed ordering, no deduplicaci√≥n, batch size 1-10
- Kinesis: Shard ordering, duplicaci√≥n posible, batches 100-500

---

### **Kinesis Firehose**
**¬øC√≥mo optimizas el data lake con Firehose?**

‚úÖ **Respuesta**:  
"Firehose consume de Kinesis y escribe a S3 en **formato Parquet**, con compresi√≥n 70% vs JSON. Partici√≥n autom√°tica por `year=!{timestamp:yyyy}/month=!{timestamp:MM}/day=!{timestamp:dd}` para queries eficientes en Athena. Buffer de 5 min o 128 MB. Costo: **$0.029/GB procesado**."

**Pipeline**:
```
Kinesis ‚Üí Firehose ‚Üí S3 Parquet ‚Üí Glue Crawler ‚Üí Athena/QuickSight
```

---

### **Amazon SNS**
**¬øC√≥mo garantizas que las emergencias lleguen a autoridades en <2s?**

‚úÖ **Respuesta**:  
"SNS Topics (Authorities, Owner, Manager) permiten **m√∫ltiples suscriptores** paralelos (SMS, Email, Webhooks). En Step Functions se notifican en paralelo: Authorities + Owner + DynamoDB Incidents. SNS tiene SLA <100ms p99, garantizando notificaciones casi instant√°neas."

**Suscripciones configuradas**:
- Authorities: SMS + Email
- Owner: SMS + Email + Push
- Manager: Email + SQS
- Alarms: Email + PagerDuty

---

## üíæ **STORAGE**

### **Amazon DynamoDB**
**¬øPor qu√© DynamoDB On-Demand vs Provisioned?**

‚úÖ **Respuesta**:  
"On-Demand billing escala autom√°ticamente sin planning de capacidad, ideal para cargas impredecibles. Costo **2x** Provisioned en peak, pero **0.5x** en valleys. Para telemetr√≠a con spikes de emergencias, On-Demand elimina throttling. Point-in-Time Recovery y Streams habilitantage."

**Tablas**:
- Telemetry: Hash PK `vehicle_id`, Range SK `timestamp`, TTL 7 d√≠as
- Incidents: Hash PK `ulnerability_id`, GSI por vehicle/status
- WebSocket Connections: Hash PK `connection_id`, TTL para limpieza
- Alerts Config: Hash PK `user_id`, Range SK `alert_type`

---

### **Amazon RDS Aurora PostgreSQL**
**¬øPor qu√© Aurora Serverless v2?**

‚úÖ **Respuesta**:  
"Aurora Serverless v2 auto-scales de 0.5 a 16 ACUs sin downtime, ideal para cargas variables. Multi-AZ con failover <30s. PostgreSQL 15 con extensibilidad (JSONB, PostGIS). Costo: **~$0.12/ACU-hora** en us-east-1."

**Diferencia vs RDS simple**:
- Auto-scaling instant√°neo (vs scaling manual 20-30 min)
- Pause/resume para dev (ahorro costos)
- Compatible con RDS PostgreSQL (migraci√≥n sin cambios)

---

### **ElastiCache Redis**
**¬øPor qu√© Redis en vez de DynamoDB para cache?**

‚úÖ **Respuesta**:  
"Redis ofrece **sub-millisecond latency** vs DynamoDB ~10ms, y soporta estructuras complejas (lists, sets, sorted sets). Cacheamos √∫ltimas posiciones veh√≠culos activos, sesiones usuario, y resultados queries frecuentes. 2 nodes multi-AZ con failover autom√°tico."

**Configuraci√≥n**:
- Cache hit rate target: >90%
- Expiration: 300s para telemetr√≠a
- Persistence: AOF habilitado

---

### **Amazon S3**
**¬øC√≥mo optimizas costos de storage con Lifecycle Policies?**

‚úÖ **Respuesta**:  
"S3 Intelligent Tiering monitorea access patterns y mueve objetos a tiers menos costosos autom√°ticamente. Videos a Glacier despu√©s de 7 d√≠as (85% ahorro), Data Lake a IA despu√©s de 90 d√≠as. Durabilidad 99.999999999% (11 9's) sin preocupaciones."

**Buckets**:
- Videos: Glacier despu√©s 7 d√≠as, expiraci√≥n 365 d√≠as
- Data Lake: Intelligent Tiering 90 d√≠as, Glacier 180 d√≠as
- Logs: Expiraci√≥n 30 d√≠as

---

### **Amazon Timestream**
**¬øPor qu√© Timestream vs InfluxDB en ECS?**

‚úÖ **Respuesta**:  
"Timestream es **serverless**, auto-scaling, con queries SQL nativas. Optimizado para series temporales con almacenamiento en 2 tiers: Memory Store (7 d√≠as acceso instant√°neo) y Magnetic Store (12 meses costo optimizado). Costo: **$0.50/GB/mes** + queries $0.01/million."

**Ventajas**:
- No infraestructura que mantener
- Partici√≥n autom√°tica por tiempo
- Auto-scaling ilimitado

---

## ‚ö° **COMPUTE**

### **AWS Lambda**
**¬øPor qu√© Lambda sin VPC para procesadores de telemetr√≠a?**

‚úÖ **Respuesta**:  
"Lambda fuera de VPC reduce **cold starts** de 10-60s a <1s (10-100x m√°s r√°pido). DynamoDB/Kinesis son servicios AWS accesibles via backbone interno sin necesidad de VPC. Ahorro adicional: **~$50/mes** en ENI y NAT Gateway traffic. Para emergencias, cada milisegundo cuenta."

**Functions**:
- Telemetry Processor: 512 MB, timeout 60s, 100 concurrent
- Emergency Orchestrator: 256 MB, timeout 30s
- Anomaly Detector: 256 MB, timeout 15s
- WebSocket Handler: 256 MB, timeout 30s

---

### **Amazon ECS Fargate**
**¬øPor qu√© Fargate vs EC2?**

‚úÖ **Respuesta**:  
"Fargate elimina **gesti√≥n de servidores** - solo subes contenedores Docker. Auto-scaling basado en CPU/memoria (70%/80% thresholds). Target tracking policies ajustan tasks de 2-20 seg√∫n demanda. Multi-AZ con Application Load Balancer para distribuci√≥n. Costo: **$0.04/vCPU-hora + $0.004/GB-hora**."

**Servicios en ECS**:
- Monitoring Service (Node.js/Express)
- Auto-scaling 2-20 tasks
- Health checks cada 30s
- Blue/Green deployments

---

## üåê **API LAYER**

### **API Gateway REST**
**¬øPor qu√© API Gateway vs ALB directo?**

‚úÖ **Respuesta**:  
"API Gateway agrega **authorization** (Cognito JWT), rate limiting (1,000 req/seg por usuario), request/response transformaci√≥n, caching, y WAF integration. Frontend consume una sola URL que enruta internamente a microservicios. Costo: **$3.50/millon requests**."

**Features**:
- Cognito authorization
- Request validation
- Response caching
- Stage variables para configuraci√≥n

---

### **API Gateway WebSocket**
**¬øC√≥mo manejas 10,000+ conexiones concurrentes?**

‚úÖ **Respuesta**:  
"WebSocket API escala autom√°ticamente a **10,000+ conexiones** sin configuraci√≥n. Lambda maneja $connect/$disconnect/$subscribe, DynamoDB trackea connections activas. Broadcasts se env√≠an v√≠a `Management API` usando connection IDs. Costo: **$1.00/millon mensajes + $0.25/connection-hora**."

**Flujo**:
1. Cliente conecta ‚Üí Lambda persiste en DynamoDB
2. Cliente subscribe ‚Üí Lambda registra vehicle_ids
3. Telemetr√≠a update ‚Üí Lambda lee DynamoDB, env√≠a solo a subscribed clients

---

### **AWS AppSync (GraphQL)**
**¬øPor qu√© GraphQL adem√°s de REST API?**

‚úÖ **Respuesta**:  
"GraphQL permite que clientes **query solo los campos necesarios** (over-fetching reducido). Subscriptions permiten updates en tiempo real (veh√≠culos en movimiento). Resolvers usan DynamoDB nativamente sin Lambda intermedia. Ideal para mobile apps con bandwidth limitado."

**Schema**:
- Query: `getVehicle(vehicleId: ID!): Vehicle`
- Subscription: `onVehicleUpdate(vehicleId: ID!): Vehicle`
- Resolvers VTL mapean DynamoDB directamente

---

## üîÄ **ORCHESTRATION**

### **AWS Step Functions**
**¬øC√≥mo garantizas que emergencias se procesen en <2s?**

‚úÖ **Respuesta**:  
"Step Functions ejecuta **tareas en paralelo** (notify authorities + owner + record incident + activate camera). Sin Lambda serial/sequential, el paralelismo reduce latencia de ~8s a <2s. State machine define workflow visual con retry/catch autom√°ticos. Trazabilidad completa de cada emergencia."

**Pasos**:
1. Record Incident (DynamoDB) - Retry 3x, backoff 1.5x
2. Parallel Branch:
   - Notify Authorities (SNS)
   - Notify Owner (SNS)
   - Activate Video (Lambda)
3. Update Incident Status

---

### **Amazon EventBridge**
**¬øC√≥mo desacoplas eventos entre servicios?**

‚úÖ **Respuesta**:  
"EventBridge es un **event bus** para routing basado en patrones JSON (source, detail-type, detail). Por ejemplo: `detail.priority = "high"` ‚Üí route a Kinesis separate lane. Esto permite agregar nuevos consumidores sin modificar publishers."

**Reglas**:
- High-priority telemetry ‚Üí Separate Kinesis lane
- Payment events ‚Üí Notify accounting
- Contract creation ‚Üí Trigger workflow

---

## üîç **MONITORING**

### **Amazon CloudWatch**
**¬øC√≥mo detectas cuellos de botella antes que afecten clientes?**

‚úÖ **Respuesta**:  
"CloudWatch Dashboards agregan m√©tricas de todos los servicios en vista unificada. Alarmas alertan cuando SQS queue depth > 1000 o Lambda duration > 2s. Logs Insights con queries SQL encuentran patrones en logs. Integraci√≥n X-Ray para tracing distribuido end-to-end."

**M√©tricas clave**:
- Kinesis Iterator Age (debe ser < 1 min)
- Lambda Duration (p99 < 200ms)
- DynamoDB Throttling (0 throttles)
- ALB 5XX Errors (< 0.1%)

---

### **AWS X-Ray**
**¬øC√≥mo rastrear transacciones complejas entre servicios?**

‚úÖ **Respuesta**:  
"X-Ray genera **service map** visual de cada request pasando por Lambda ‚Üí DynamoDB ‚Üí SNS ‚Üí Step Functions. Segmentos muestran latencia de cada servicio, permitiendo identificar cuellos de botella. Por ejemplo: si latency total es 1.8s, X-Ray muestra que 1.5s fue en DynamoDB."

**Traces habilitados**:
- Lambda functions
- API Gateway
- ECS services
- Step Functions
- DynamoDB

---

### **AWS GuardDuty**
**¬øC√≥mo detectas amenazas de seguridad sin SIEM dedicado?**

‚úÖ **Respuesta**:  
"GuardDuty analiza CloudTrail logs, VPC Flow Logs, y DNS logs con **machine learning** para detectar comportamiento an√≥malo (acceso desde IPs sospechosas, API calls raros, port scanning). Alertas v√≠a SNS + PagerDuty. Costo: **$3.00/millon eventos CloudTrail**."

**Threats detectadas**:
- Port scanning
- Unauthorized API calls
- Crypto mining
- Data exfiltration attempts

---

## üîê **SECURITY**

### **AWS KMS**
**¬øC√≥mo gestionas encryption keys sin compromiso de seguridad?**

‚úÖ **Respuesta**:  
"KMS es **managed service** para encryption keys con rotaci√≥n autom√°tica. Keys Customer Managed (no AWS Managed) dan control granular de policies. Encryption en reposo habilitado en DynamoDB, S3, RDS, ElastiCache. Encryption en tr√°nsito v√≠a TLS 1.3."

**Usage**:
- DynamoDB: SSE-KMS con customer managed key
- S3: SSE-KMS default encryption
- RDS: Encrypted storage (opcional)
- ElastiCache: Transit encryption at-rest

---

### **AWS Secrets Manager**
**¬øC√≥mo almacenas passwords sin exponerlos en c√≥digo?**

‚úÖ **Respuesta**:  
"Secrets Manager almacena secrets (DB passwords, API keys) con **versioning** y rotaci√≥n autom√°tica. Lambda/ECS recuperan secrets v√≠a SDK con IAM roles, sin hardcodeo. Secrets encrypted con KMS. Costo: **$0.40/secret-mes + $0.05/10K API calls**."

**Secrets configurados**:
- Aurora DB password
- Redis auth token
- Stripe API key
- Government API credentials

---

### **AWS WAF**
**¬øC√≥mo proteges APIs contra ataques DDoS y OWASP Top 10?**

‚úÖ **Respuesta**:  
"WAF Regional asociado a API Gateway con Core Rule Set (OWASP Top 10), Cybersecurity Rule Set, rate limiting (2,000 req/5min por IP), y Known Bad Inputs. Logs a CloudWatch para forensics. Costo: **$1.00/mes + $0.60/million web requests**."

**Rules**:
- Rate limiting per IP
- SQL injection protection
- XSS protection
- Bad request blocking

---

### **Amazon Cognito**
**¬øPor qu√© Cognito vs Auth0 u Okta?**

‚úÖ **Respuesta**:  
"Cognito es **nativo AWS**, integrado con subsets IAM permissions y Lambda triggers (pre-signup, post-auth). User Pools con MFA TOTP, password policies, grupos RBAC (Admin, Viewer, Manager). Costo: **$0.0055/Monthly Active Users** vs Auth0 $240/mes base."

**Configuraci√≥n**:
- User Pool con 5 grupos (Admin, Viewer, Purchaser, Approver, Manager)
- MFA habilitado
- Password policy: 12 chars, complexity
- JWT tokens: 1h access, 30d refresh

---

## üí∞ **COST OPTIMIZATION**

### **¬øC√≥mo optimizas costos sin sacrificar performance?**

‚úÖ **Respuesta**:  
"Estrategia multi-faceta:

1. **Reserved Instances** (1 a√±o): Aurora 35% descuento ‚Üí $123/mes ahorro
2. **Savings Plans** (3 a√±os): ECS/Lambda 50% descuento ‚Üí $150/mes ahorro
3. **Lifecycle Policies**: S3 Intelligent Tiering + Glacier ‚Üí 40% ahorro storage
4. **Auto-scaling**: Reduce capacidad en valleys ‚Üí pago solo usage real
5. **VPC Endpoints**: Evita NAT Gateway charges ‚Üí $29/mes ahorro

**Total optimizado**: $1,100/mes producci√≥n vs $1,500 sin optimizaci√≥n (**26% ahorro**)."

---

## ‚ùì **PREGUNTAS FRECUENTES**

### **¬øQu√© pasa si AWS tiene un outage?**

‚úÖ **Respuesta**:  
"Arquitectura multi-AZ con failover autom√°tico. RDS Multi-AZ replica en standby (failover <30s). ElastiCache Redis Multi-AZ con read replicas. Si us-east-1 completo cae, backups en S3 permiten restore a otra regi√≥n.opcional Cross-region replication. 99.9% SLA es **prometed** por AWS."

---

### **¬øC√≥mo manejas picos de traffic (Black Friday, emergencias masivas)?**

‚úÖ **Respuesta**:  
"Auto-scaling reactivo:
- Kinesis: 10 shards base ‚Üí auto-scale a 50 (1,000 msg/s cada uno)
- Lambda: 100 concurrent executions
- ECS: 2-20 tasks seg√∫n CPU/memoria
- DynamoDB On-Demand: Sin l√≠mite de capacity
- Aurora: 0.5-16 ACUs auto-scaling

Sin intervenci√≥n manual, sistema escala de 1,000 a 10,000+ veh√≠culos."

---

### **¬øQu√© sucede si un microservicio falla?**

‚úÖ **Respuesta**:  
"Circuit Breaker pattern + retry autom√°ticos:
- Lambda: 3 retries con exponential backoff
- DynamoDB: Throttling autom√°tico con retry
- ECS: Health checks reinician tasks unhealthy
- ALB: Route around unhealthy targets
- Dead Letter Queues capturan mensajes sin procesar

Architecture is **fail-safe** - un servicio ca√≠do no derriba sistema completo."

---

### **¬øC√≥mo migrar de infraestructura actual sin downtime?**

‚úÖ **Respuesta**:  
"Migraci√≥n gradual:

**Fase 1**: Proveedores paralelos (dual-write)
- Dispositivos escriben a IoT Core y sistema legacy
- Validar parity de datos (1 semana)

**Fase 2**: Toggle gradual (feature flags)
- 10% traffic ‚Üí AWS
- 50% traffic ‚Üí AWS
- 100% traffic ‚Üí AWS
- Rollback instant√°neo si issues

**Fase 3**: Cutover DNS
- Route 53 switch + TTL bajo (60s)
- Monitoreo intensivo 24h

**Total downtime**: 0 segundos."

---

## üìä **M√âTRICAS DE √âXITO**

| M√©trica | Target | Implementaci√≥n |
|---------|--------|----------------|
| Emergency Response | <2s p99 | SQS FIFO + Step Functions |
| Telemetry Throughput | 5,000 msg/s | Kinesis 10 shards |
| API Availability | 99.9% | Multi-AZ + ALB |
| DB Read Latency | <10ms p95 | DynamoDB + Redis |
| Cache Hit Rate | avantajou |>90% | ElastiCache |

---

**Este documento te da respuestas t√©cnicas s√≥lidas y plagable para cualquier pregunta que te hagan. ¬°√âxito en tu presentaci√≥n!** üöÄ

